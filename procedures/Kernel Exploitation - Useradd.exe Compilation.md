---
id: 28f89b0a-c57e-4213-aeea-b2ccddca79a0
name: Kernel Exploitation - Useradd.exe Compilation
type: procedure
verified: false
submitted: false
created_at: '2023-04-06T03:56:29.745150+00:00'
updated_at: '2023-04-10T20:37:42.723599+00:00'
tactics:
- '[[Persistence|TA0003 - Persistence]]'
- '[[Privilege Escalation|TA0004 - Privilege Escalation]]'
techniques:
- '[[Exploitation for Privilege Escalation|T1068 - Exploitation for Privilege Escalation]]'
- '[[Kernel Modules and Extensions|T1215 - Kernel Modules and Extensions]]'
tags:
- '[[EoP - Kernel Exploitation]]'
- '[[#Security Bulletin]]'
- '[[Windows - Privilege Escalation]]'
commands:
- '[[Compile useradd.c using i586-mingw32msvc-gcc]]'
---

# Kernel Exploitation - Useradd.exe Compilation

## Summary

This procedure involves compiling a useradd.c file to adduser.exe using the i586-mingw32msvc-gcc compiler. This can be used to escalate privileges on a Windows machine. The technical explanation involves exploiting a vulnerability in the kernel to gain elevated access to system resources. This proc

## Description

# Description

This procedure involves compiling a useradd.c file to adduser.exe using the i586-mingw32msvc-gcc compiler. This can be used to escalate privileges on a Windows machine. The technical explanation involves exploiting a vulnerability in the kernel to gain elevated access to system resources. This procedure can be valuable to an attacker looking to gain access to sensitive information or execute malicious code on a compromised system.

## Requirements

1. Access to a Windows machine

1. i586-mingw32msvc-gcc compiler

## Defense

1. Ensure all software and systems are up to date with the latest security patches

1. Implement proper access controls and permissions to limit the impact of a potential attack

1. Monitor system logs and network traffic for any suspicious activity

## Objectives

1. Escalate privileges on a Windows machine

1. Gain access to sensitive information

1. Execute malicious code on a compromised system

# Instructions

1. To compile useradd.c to adduser.exe using i586-mingw32msvc-gcc, run the following command:

**Code**: [[Kali> i586-mingw32msvc-gcc -o adduser.exe useradd.]]

> The command "i586-mingw32msvc-gcc" is used to invoke the GNU Compiler Collection to compile the file "useradd.c" to an executable named "adduser.exe". The option "-o" specifies the output file name. The resulting executable can then be used to add a user. Note that this command is being run in Kali Linux. 

**Command** ([[Compile useradd.c using i586-mingw32msvc-gcc]]):

```bash
i586-mingw32msvc-gcc -o adduser.exe useradd.c
```

## MITRE ATT&CK Mapping

### Tactics

- [[Persistence|TA0003 - Persistence]]
- [[Privilege Escalation|TA0004 - Privilege Escalation]]

### Techniques

- [[Exploitation for Privilege Escalation|T1068 - Exploitation for Privilege Escalation]]
- [[Kernel Modules and Extensions|T1215 - Kernel Modules and Extensions]]

## Commands Used

- [[Compile useradd.c using i586-mingw32msvc-gcc]]

## Tags

- [[EoP - Kernel Exploitation]]
- [[#Security Bulletin]]
- [[Windows - Privilege Escalation]]
