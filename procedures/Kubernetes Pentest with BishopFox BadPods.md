---
id: 3d5f60fc-8ef3-4df7-8302-d3e760b92e44
name: Kubernetes Pentest with BishopFox BadPods
type: procedure
verified: false
submitted: false
created_at: '2023-04-06T03:56:17.331687+00:00'
updated_at: '2023-04-06T03:56:17.361660+00:00'
tactics:
- '[[Defense Evasion|TA0005 - Defense Evasion]]'
techniques:
- '[[Subvert Trust Controls|T1553 - Subvert Trust Controls]]'
sub_techniques:
- '[[Code Signing|T1553.002 - Code Signing]]'
- '[[Create Cloud Instance|T1578.002 - Create Cloud Instance]]'
- '[[SIP and Trust Provider Hijacking|T1553.003 - SIP and Trust Provider Hijacking]]'
tags:
- '[[Container - Kubernetes Pentest]]'
- '[[Tools]]'
commands:
- '[[Apply BishopFox Bad Pods manifests]]'
- '[[Apply BishopFox Bad Pods manifests]]'
- '[[Apply BishopFox Bad Pods manifests]]'
- '[[Apply BishopFox Bad Pods manifests]]'
- '[[Apply BishopFox Bad Pods manifests]]'
- '[[Apply BishopFox Bad Pods manifests]]'
- '[[Apply BishopFox Bad Pods manifests]]'
- '[[Apply BishopFox Bad Pods manifests]]'
---

# Kubernetes Pentest with BishopFox BadPods

## Summary

This procedure utilizes BishopFox BadPods to conduct a Kubernetes pentest, focusing on the security of containerized applications running on Kubernetes. BadPods is a collection of intentionally vulnerable pods that can be used to test the security of a Kubernetes cluster. By deploying these pods, a

## Description

# Description

This procedure utilizes BishopFox BadPods to conduct a Kubernetes pentest, focusing on the security of containerized applications running on Kubernetes. BadPods is a collection of intentionally vulnerable pods that can be used to test the security of a Kubernetes cluster. By deploying these pods, attackers can identify misconfigurations and vulnerabilities in the cluster, and potentially gain access to sensitive data or take control of the cluster.

From a technical perspective, this procedure involves deploying the BadPods to the target Kubernetes cluster and conducting various tests to identify vulnerabilities. Business value can be found in the identification and remediation of security issues before they are exploited by real attackers, thus avoiding potential data breaches, financial losses, and reputational damage.

The objectives of this procedure are to identify vulnerabilities in the target Kubernetes cluster and to assess the overall security posture of the containerized applications running on the cluster.

## Requirements

1. Access to the target Kubernetes cluster

1. Authentication credentials with sufficient privileges to deploy pods

1. BishopFox BadPods tool

## Defense

1. Ensure that the Kubernetes cluster is properly configured and all security patches are up-to-date

1. Implement strict access controls and limit the use of privileged accounts

1. Monitor the Kubernetes cluster for any suspicious activity and unauthorized access attempts

## Objectives

1. Identify vulnerabilities in the target Kubernetes cluster

1. Assess the overall security posture of the containerized applications running on the cluster

# Instructions

1. To deploy BishopFox BadPods, run the following command:

**Code**: [[kubectl apply -f https://raw.githubusercontent.com]]

> This command deploys a collection of manifests that will create pods with elevated privileges. The `kubectl apply` command is used to apply the YAML configuration files located in the specified URLs. Each YAML file defines a Kubernetes pod with different levels of privilege escalation. Running this command will create multiple pods with different levels of privilege escalation that can be used for testing and experimentation purposes.

**Command** ([[Apply BishopFox Bad Pods manifests]]):

```bash
kubectl apply -f https://raw.githubusercontent.com/BishopFox/badPods/main/manifests/everything-allowed/pod/everything-allowed-exec-pod.yaml
```

**Command** ([[Apply BishopFox Bad Pods manifests]]):

```bash
kubectl apply -f https://raw.githubusercontent.com/BishopFox/badPods/main/manifests/priv-and-hostpid/pod/priv-and-hostpid-exec-pod.yaml
```

**Command** ([[Apply BishopFox Bad Pods manifests]]):

```bash
kubectl apply -f https://raw.githubusercontent.com/BishopFox/badPods/main/manifests/priv/pod/priv-exec-pod.yaml
```

**Command** ([[Apply BishopFox Bad Pods manifests]]):

```bash
kubectl apply -f https://raw.githubusercontent.com/BishopFox/badPods/main/manifests/hostpath/pod/hostpath-exec-pod.yaml
```

**Command** ([[Apply BishopFox Bad Pods manifests]]):

```bash
kubectl apply -f https://raw.githubusercontent.com/BishopFox/badPods/main/manifests/hostpid/pod/hostpid-exec-pod.yaml
```

**Command** ([[Apply BishopFox Bad Pods manifests]]):

```bash
kubectl apply -f https://raw.githubusercontent.com/BishopFox/badPods/main/manifests/hostnetwork/pod/hostnetwork-exec-pod.yaml
```

**Command** ([[Apply BishopFox Bad Pods manifests]]):

```bash
kubectl apply -f https://raw.githubusercontent.com/BishopFox/badPods/main/manifests/hostipc/pod/hostipc-exec-pod.yaml
```

**Command** ([[Apply BishopFox Bad Pods manifests]]):

```bash
kubectl apply -f https://raw.githubusercontent.com/BishopFox/badPods/main/manifests/nothing-allowed/pod/nothing-allowed-exec-pod.yaml
```

## MITRE ATT&CK Mapping

### Tactics

- [[Defense Evasion|TA0005 - Defense Evasion]]

### Techniques

- [[Subvert Trust Controls|T1553 - Subvert Trust Controls]]

### Sub-Techniques

- [[Code Signing|T1553.002 - Code Signing]]
- [[Create Cloud Instance|T1578.002 - Create Cloud Instance]]
- [[SIP and Trust Provider Hijacking|T1553.003 - SIP and Trust Provider Hijacking]]

## Commands Used

- [[Apply BishopFox Bad Pods manifests]]
- [[Apply BishopFox Bad Pods manifests]]
- [[Apply BishopFox Bad Pods manifests]]
- [[Apply BishopFox Bad Pods manifests]]
- [[Apply BishopFox Bad Pods manifests]]
- [[Apply BishopFox Bad Pods manifests]]
- [[Apply BishopFox Bad Pods manifests]]
- [[Apply BishopFox Bad Pods manifests]]

## Tags

- [[Container - Kubernetes Pentest]]
- [[Tools]]
