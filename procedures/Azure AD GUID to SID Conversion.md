---
id: 569c6d1a-e9f6-4d24-94a8-39b33951c707
name: Azure AD GUID to SID Conversion
type: procedure
verified: false
submitted: false
created_at: '2023-04-06T03:56:16.055962+00:00'
updated_at: '2023-04-10T20:19:35.808504+00:00'
tags:
- '[[Azure AD]]'
- '[[Cloud - Azure]]'
- '[[Convert GUID to SID]]'
commands:
- '[[Generate GUID and SID]]'
---

# Azure AD GUID to SID Conversion

## Summary

The Azure AD GUID to SID conversion procedure is a technique used by attackers to obfuscate their actions and evade detection. This procedure converts the globally unique identifier (GUID) of an Azure Active Directory (AAD) object to a security identifier (SID), making it more difficult for defende

## Description

# Description

The Azure AD GUID to SID conversion procedure is a technique used by attackers to obfuscate their actions and evade detection. This procedure converts the globally unique identifier (GUID) of an Azure Active Directory (AAD) object to a security identifier (SID), making it more difficult for defenders to track the object's movements. 

To perform this conversion, an attacker can use the 'Translate AAD ID to SID' command, which takes the GUID as input and returns the corresponding SID. The 'GUID and SID Generator' command can be used to generate a list of GUIDs and SIDs for multiple AAD objects. The 'UUID Representation' command can be used to display the GUID in different formats, such as binary or hexadecimal. Finally, the 'Extracted Data' command can be used to extract the GUIDs and SIDs from a larger dataset.

This procedure can be valuable for attackers looking to maintain their presence in a target environment, as it makes it more difficult for defenders to track their activity and identify compromised accounts or systems.

## Requirements

1. Access to an AAD environment

1. Authentication credentials with sufficient privileges

1. Access to the necessary tools (e.g. 'Translate AAD ID to SID' command)

## Defense

1. Monitor for suspicious activity related to AAD object GUIDs and SIDs

1. Implement access controls to limit the ability to perform AAD object conversions

1. Regularly review and audit AAD object activity for signs of compromise

## Objectives

1. Obfuscate the movements of AAD objects

1. Evade detection by defenders

1. Maintain a persistent presence in a target environment

# Instructions

1. To translate a user's AAD ID to a SID, concatenate the string "S-1-12-1-" with the user's AAD ID.

**Code**: [[&quot;S-1–12–1-&quot;]]

> This command is used to translate a user's AAD ID to a SID, which is a unique identifier used in Windows to represent security principals such as users, groups, and computers. The resulting SID can be used in various security-related operations such as assigning permissions and auditing access.

2. Use this command to generate a random GUID and SID. The GUID is a globally unique identifier, while the SID is a security identifier that is used to uniquely identify a security principal or security group. The base16 and base10 values should be replaced with actual hexadecimal and decimal values respectively.

**Code**: [[GUID: [base16(a1)]-[base16(a2)]-[ base16(a3)]-[bas]]

> The GUID generated by this command is a random identifier that can be used for various purposes such as creating unique identifiers for objects in a system. The SID generated by this command is also a random identifier that is used for security purposes, such as assigning permissions to a user or group. The base16 and base10 values in the generated output are placeholders that should be replaced with actual values.

**Command** ([[Generate GUID and SID]]):

```bash
GUID: [base16(a1)]-[base16(a2)]-[ base16(a3)]-[base16(a4)]
SID: S-1–12–1-[base10(a1)]-[ base10(a2)]-[ base10(a3)]-[ base10(a4)]
```

3. Use the UUID Representation command to convert the given UUID string to its binary representation.

**Code**: [[6aa89ecb-1f8f-4d92–810d-b0dce30b6c82]]

> The UUID (Universally Unique Identifier) Representation command is used to convert a UUID string to its binary representation. The UUID is a 128-bit value represented as a sequence of hexadecimal digits separated by hyphens. This command takes the UUID string as input and returns its binary representation. The binary representation is a 16-byte value that can be used in various applications such as network communication, database storage, and file systems. The binary representation is more compact than the UUID string and is easier to process by computers.

4. Use a data extraction tool to extract the data from the given string.

**Code**: [[S-1–12–1–1789435595–1301421967–3702525313–21881190]]

> The given data is in a specific format, which needs to be extracted using a data extraction tool. The extracted data can be used for further processing or analysis as required.

## Commands Used

- [[Generate GUID and SID]]

## Tags

- [[Azure AD]]
- [[Cloud - Azure]]
- [[Convert GUID to SID]]
